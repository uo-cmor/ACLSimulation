<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="true" />
<meta name="allow-skip" content="true" />

<title>Tutorial</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<!-- taken from https://github.com/rstudio/rmarkdown/blob/67b7f5fc779e4cfdfd0f021d3d7745b6b6e17149/inst/rmd/h/default.html#L296-L362 -->
<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>
<!-- end tabsets -->



</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<div id="section-introduction" class="section level2">
<h2>Introduction</h2>
<p>Over the last few weeks, we have defined some model input parameters and code to implement a cohort-level Markov model and an individual-level state transition model. The code for these is below (which should be similar to your previous scripts).</p>
<p>(These are interactive code boxes - you can play around with these to change the code as you like. Hit ‘Run’ to run your code and see the output (if it produces any), and ‘Start Over’ to reset the code back to it’s original state.)</p>
<div class="tutorial-exercise" data-label="parameters" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>states &lt;- c(&quot;healthy&quot;, &quot;acl_acute&quot;, &quot;acl_chronic&quot;, &quot;acl_recovered&quot;, &quot;oa&quot;, &quot;tkr&quot;, &quot;post_tkr&quot;, &quot;dead&quot;)

probs &lt;- c(0, 1, 0, 0, 0, 0, 0, 0)

transitions &lt;- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),
                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),
                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),
                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),
                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),
                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),
                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),
                     c(0, 0, 0,    0,   0,    0,   0,    1))

costs &lt;- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)
utility &lt;- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise" data-label="cohort-model" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>update_probabilities &lt;- function(probs, transitions) {
  as.vector(probs %*% transitions)
}

run_cohort_model &lt;- function(initial_probs, transitions, t) {
  probabilities &lt;- matrix(nrow = t + 1, ncol = length(initial_probs))
  probabilities[1, ] &lt;- initial_probs

  for (x in seq_len(t)) {
    probabilities[x + 1, ] &lt;- update_probabilities(probabilities[x, ],
                                                   transitions)
  }

  probabilities
}

calculate_outcome_value &lt;- function(probs, values) {
  sum(probs * values)
}

calculate_outcomes &lt;- function(probabilities, values, discount_rate = 0) {
  t &lt;- nrow(probabilities)
  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))
}</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise" data-label="individual-model" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>update_state &lt;- function(initial_state, transitions) {
  n &lt;- nrow(transitions)
  sample.int(n, 1, prob = transitions[initial_state, ])
}

simulate_individual &lt;- function(initial_state, transitions, t) {
  states &lt;- vector(&quot;integer&quot;, length = t + 1)
  states[1] &lt;- initial_state

  for (x in seq_len(t)) {
    states[x + 1] &lt;- update_state(states[x], transitions)
  }

  states
}

run_individual_model &lt;- function(initial_states, transitions, t) {
  n &lt;- length(initial_states)

  states &lt;- matrix(nrow = n, ncol = t + 1)
  for (x in seq_len(n)) {
    states[x, ] &lt;- simulate_individual(initial_states[x], transitions, t)
  }

  states
}

calculate_individual_outcome_value &lt;- function(states, values) {
  matrix(values[states], nrow = nrow(states))
}

calculate_average_outcomes &lt;- function(states, values, discount_rate = 0) {
  outcomes &lt;- calculate_individual_outcome_value(states, values)
  n &lt;- nrow(outcomes)
  t &lt;- ncol(outcomes)
  for (x in seq_len(n)) {
    outcomes[x, ] &lt;- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)
  }
  mean(rowSums(outcomes))
}</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-cost-effectiveness-analysis" class="section level2">
<h2>Cost-effectiveness analysis</h2>
<p>To use these models for cost-effectiveness analysis, we need to define model input parameters that represent each of the interventions to be compared – these could involve different values for transition probabilities, costs, and/or outcomes (health utility).</p>
<p>For a real analysis, these would be estimated from data, such as a randomised trial, observational study, or systematic review/meta-analysis; for this example we will just make up some numbers :)</p>
<div id="section-usual-care-comparator" class="section level3">
<h3>Usual care comparator</h3>
<p>Let’s assume our previous input parameters represent ‘business-as-usual’, or an appropriate usual care comparator for the economic evaluation:</p>
<div class="tutorial-exercise" data-label="transitions_uc" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>transitions_UC &lt;- transitions
transitions_UC</code></pre>
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    0 0.00  0.0 0.00  0.0 0.00 0.00
[2,]    0    0 0.44  0.5 0.05  0.0 0.00 0.01
[3,]    0    0 0.38  0.5 0.10  0.0 0.00 0.02
[4,]    0    0 0.00  0.9 0.08  0.0 0.00 0.02
[5,]    0    0 0.00  0.0 0.87  0.1 0.00 0.03
[6,]    0    0 0.00  0.0 0.00  0.0 0.96 0.04
[7,]    0    0 0.00  0.0 0.00  0.0 0.95 0.05
[8,]    0    0 0.00  0.0 0.00  0.0 0.00 1.00</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise" data-label="costs_uc" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>costs_UC &lt;- costs
costs_UC</code></pre>
<pre><code>[1]     0  7000  1200   500  1000 20000  1000     0</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise" data-label="utility_uc" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>utility_UC &lt;- utility
utility_UC</code></pre>
<pre><code>[1] 1.0 0.5 0.8 0.9 0.7 0.6 0.8 0.0</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-new-interventions-to-evaluate" class="section level3">
<h3>New interventions to evaluate:</h3>
<p>Start with a hypothetical intervention that improves symptomatic recovery from ACL injury (reduces the probability of transition from <code>acl_acute</code> to <code>acl_chronic</code> (symptomatic) and increases the probability of transition to <code>acl_recovered</code> (asymptomatic)), but costs an additional $2000 per patient (over the year following injury):</p>
<div class="tutorial-exercise" data-label="improved-recovery-parameters" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>transitions_IR &lt;- transitions
transitions_IR[2, ] &lt;- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)

costs_IR &lt;- costs
costs_IR[2] &lt;- 9000</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>Another that provides ongoing treatment to reduce the utility losses in the post-ACL states:</p>
<div class="tutorial-exercise" data-label="ongoing-treatment-parameters" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>utility_OT &lt;- utility
utility_OT[3:4] &lt;- c(0.85, 0.95)

costs_OT &lt;- costs
costs_OT[3:4] &lt;- c(1700, 1000)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>And another that reduces the rate of OA incidence from the post-ACL states:</p>
<div class="tutorial-exercise" data-label="reduced-oa-incidence-parameters" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>transitions_RO &lt;- transitions
transitions_RO[3, 3:5] &lt;- c(0.43, 0.5, 0.05)
transitions_RO[4, 4:5] &lt;- c(0.94, 0.04)

costs_RO &lt;- costs
costs_RO[3:4] &lt;- c(1500, 1000)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
</div>
<div id="section-cea-cont." class="section level2">
<h2>CEA (cont.)</h2>
<div id="section-section" class="section level3">
<h3></h3>
<p>To complete our analysis, we will want to write some functions to (1) run the simulation model for each set of input parameters; (2) calculate the resulting cohort outcomes (i.e. aggregate costs and QALYs); and (3) compare the outcomes between interventions to compute cost-effectiveness. Let’s start with the cohort-level model.</p>
</div>
<div id="section-section-1" class="section level3">
<h3></h3>
<p>First, we want a function that runs the cohort simulation model twice: once for the comparator scenario (<code>UC</code>, for usual care) and once for the intervention of interest (<code>TX</code>); and returns the two sets of cohort outcomes.</p>
<p>These next code boxes require you to fill in the gaps with the correct code fragments. Use ‘Run code’ to run the code (although this one below will not produce any output since it simply defines a function), and ‘Submit answer’ to check if you’ve completed it correctly. If you get stuck, the ‘Solution’ button will show you my solution. If you mess everything up, try ‘Start Over’!</p>
<div class="tutorial-exercise" data-label="cohort-simulation-function" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>cohort_simulation &lt;- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {
  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,
  # and `utility` parameters for that scenario
  probabilities_UC &lt;- run_cohort_model(initial_probs, transitions = ____, t = ____)
  probabilities_TX &lt;- run_cohort_model(initial_probs, transitions = ____, t = ____)
  
  costs_UC &lt;- calculate_outcomes(____, ____, discount_rate = discount_rate)
  costs_TX &lt;- calculate_outcomes(____, ____, discount_rate = discount_rate)
  
  QALYs_UC &lt;- calculate_outcomes(____, ____, discount_rate = discount_rate)
  QALYs_TX &lt;- calculate_outcomes(____, ____, discount_rate = discount_rate)
  
  list(UC = list(costs = costs_UC, QALYs = QALYs_UC),
       TX = list(costs = costs_TX, QALYs = QALYs_TX))
}</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="cohort-simulation-function-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>cohort_simulation &lt;- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {
  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,
  # and `utility` parameters for that scenario
  probabilities_UC &lt;- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)
  probabilities_TX &lt;- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)
  
  Costs_UC &lt;- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)
  Costs_TX &lt;- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)
  
  QALYs_UC &lt;- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)
  QALYs_TX &lt;- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)
  
  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),
       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))
}</code></pre>
</div>
</div>
<div id="section-section-2" class="section level3">
<h3></h3>
<p>Let’s see what that gives us for ‘Improved Recovery’ (IR) intervention (compared to our usual care scenario):</p>
<div class="tutorial-exercise" data-label="run-cohort-simulation" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>simulation_IR &lt;- cohort_simulation(
  initial_probs = probs,
  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),
  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),
  horizon = 10, discount_rate = 0.035
)
simulation_IR</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div id="section-section-3" class="section level3">
<h3></h3>
<p>The next step is to calculate the incremental cost-effectiveness outcomes from these: let’s just do the ICER, for now.</p>
<div class="tutorial-exercise" data-label="icer-function" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>calculate_ICER &lt;- function(simulation_output) {
  incremental_costs &lt;- simulation_output$____ - simulation_output$____
  incremental_qalys &lt;- simulation_output$____ - simulation_output$____
  
  list(Costs = incremental_costs,
       QALYs = incremental_qalys,
       ICER = ____ / ____)
}</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="icer-function-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>calculate_ICER &lt;- function(simulation_output) {
  incremental_costs &lt;- simulation_output$TX$Costs - simulation_output$UC$Costs
  incremental_qalys &lt;- simulation_output$TX$QALYs - simulation_output$UC$QALYs
  
  list(Costs = incremental_costs,
       QALYs = incremental_qalys,
       ICER = incremental_costs / incremental_qalys)
}</code></pre>
</div>
</div>
<div id="section-section-4" class="section level3">
<h3></h3>
<p>We can then use this to calculate the ICER for this intervention:</p>
<div class="tutorial-exercise" data-label="icer-ir" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>ICER_IR &lt;- calculate_ICER(simulation_IR)
ICER_IR</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
</div>
<div id="section-using-our-new-cea-model" class="section level2">
<h2>Using our new CEA model</h2>
<p>Now that we have a complete model, we can easily apply it to analyse other intervention scenarios.</p>
<p>The same model will work for the ‘Ongoing Treatment’ (reduced utility losses) intervention:</p>
<div class="tutorial-exercise" data-label="cea-ot" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>simulation_OT &lt;- cohort_simulation(
  initial_probs = probs,
  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),
  parameters_TX = list(transitions = ____, costs = ____, utility = ____),
  horizon = 10, discount_rate = 0.035
)
ICER_OT &lt;- ____(____)
ICER_OT</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="cea-ot-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>simulation_OT &lt;- cohort_simulation(
  initial_probs = probs,
  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),
  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),
  horizon = 10, discount_rate = 0.035
)
ICER_OT &lt;- calculate_ICER(simulation_OT)
ICER_OT</code></pre>
</div>
<p>And the ‘Reduced OA incidence’ intervention:</p>
<div class="tutorial-exercise" data-label="cea-ro" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>simulation_RO &lt;- cohort_simulation(
  initial_probs = probs,
  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),
  parameters_TX = list(transitions = ____, costs = ____, utility = ____),
  horizon = 10, discount_rate = 0.035
)
ICER_RO &lt;- ____(____)
ICER_RO</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="cea-ro-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>simulation_RO &lt;- cohort_simulation(
  initial_probs = probs,
  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),
  parameters_TX = list(transitions = transitions_RO, costs = costs_RO, utility = utility_UC),
  horizon = 10, discount_rate = 0.035
)
ICER_RO &lt;- calculate_ICER(simulation_RO)
ICER_RO</code></pre>
</div>
</div>
<div id="section-individual-level-simulation-model" class="section level2">
<h2>Individual-level simulation model</h2>
<p>Using the individual-level simulation model should be very similar: we need to run the model (twice), calculate outcomes for each scenario, and calculate ICER or other cost-effectiveness measures.</p>
<p>First, we need a starting cohort. Let’s use 10000 individuals, drawn from the initial cohort probabilities.</p>
<p>(In this example, everyone starts in state 2 (acute ACL injury), but the code below is generalisable to any starting probabilities):</p>
<div class="tutorial-exercise" data-label="initial-cohort" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>cohort &lt;- sample.int(8, 10000, replace = TRUE, prob = probs)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>Let’s define our <code>individual_simulation()</code> function:</p>
<div class="tutorial-exercise" data-label="individual-simulation-function" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>individual_simulation &lt;- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {
  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,
  # and `utility` parameters for that scenario
  states_UC &lt;- run_individual_model(initial_states, transitions = ____, t = ____)
  states_TX &lt;- run_individual_model(initial_states, transitions = ____, t = ____)
  
  costs_UC &lt;- calculate_average_outcomes(states = ____, values = ____,
                                         discount_rate = discount_rate)
  costs_TX &lt;- calculate_average_outcomes(states = ____, values = ____,
                                         discount_rate = discount_rate)
  
  QALYs_UC &lt;- calculate_average_outcomes(states = ____, values = ____,
                                         discount_rate = discount_rate)
  QALYs_TX &lt;- calculate_average_outcomes(states = ____, values = ____,
                                         discount_rate = discount_rate)
  
  list(UC = list(costs = costs_UC, QALYs = QALYs_UC),
       TX = list(costs = costs_TX, QALYs = QALYs_TX))
}</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":true,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="individual-simulation-function-solution" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>individual_simulation &lt;- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {
  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,
  # and `utility` parameters for that scenario
  states_UC &lt;- run_individual_model(initial_states, transitions = parameters_UC$transitions, t = horizon)
  states_TX &lt;- run_individual_model(initial_states, transitions = parameters_TX$transitions, t = horizon)
  
  Costs_UC &lt;- calculate_average_outcomes(states_UC, parameters_UC$costs, discount_rate = discount_rate)
  Costs_TX &lt;- calculate_average_outcomes(states_TX, parameters_TX$costs, discount_rate = discount_rate)
  
  QALYs_UC &lt;- calculate_average_outcomes(states_UC, parameters_UC$utility, discount_rate = discount_rate)
  QALYs_TX &lt;- calculate_average_outcomes(states_TX, parameters_TX$utility, discount_rate = discount_rate)
  
  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),
       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))
}</code></pre>
</div>
<div id="section-section-5" class="section level3">
<h3></h3>
<p>Now we can try this individual-level model for the ‘Improved Recovery’ (IR) intervention (again, compared to our usual care scenario):</p>
<div class="tutorial-exercise" data-label="run-individual-simulation" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>individual_simulation_IR &lt;- individual_simulation(
  initial_states = cohort,
  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),
  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),
  horizon = 10, discount_rate = 0.035
)
individual_simulation_IR

individual_ICER_IR &lt;- calculate_ICER(individual_simulation_IR)
individual_ICER_IR</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>

<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
gradethis::gradethis_setup()
knitr::opts_chunk$set(echo = FALSE)

tutorial_options(exercise.eval = TRUE)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_setup_chunk("__setup__", c("library(learnr)", "gradethis::gradethis_setup()", "knitr::opts_chunk$set(echo = FALSE)", 
"", "tutorial_options(exercise.eval = TRUE)"), overwrite = FALSE)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_setup_chunk("__setup__", c("library(learnr)", "gradethis::gradethis_setup()", "knitr::opts_chunk$set(echo = FALSE)", 
"", "tutorial_options(exercise.eval = TRUE)"), overwrite = FALSE)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-parameters-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-parameters-code-editor`)), session)
output$`tutorial-exercise-parameters-output` <- renderUI({
  `tutorial-exercise-parameters-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("parameters", list(setup = NULL, chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
    opts = list(label = "\"parameters\"", exercise = "TRUE"), 
    engine = "r")), code_check = NULL, error_check = NULL, check = NULL, 
    solution = NULL, options = list(eval = TRUE, echo = TRUE, 
        results = "markup", tidy = FALSE, tidy.opts = NULL, collapse = FALSE, 
        prompt = FALSE, comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "parameters", exercise = TRUE, 
        code = c("states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")", 
        "", "probs <- c(0, 1, 0, 0, 0, 0, 0, 0)", "", "transitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),", 
        "                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),", 
        "                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),", 
        "                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),", 
        "                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),", 
        "                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),", 
        "                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),", 
        "                     c(0, 0, 0,    0,   0,    0,   0,    1))", 
        "", "costs <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)", 
        "utility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)"), 
        out.width.px = 624, out.height.px = 384, params.src = "parameters, exercise=TRUE", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-cohort-model-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-cohort-model-code-editor`)), session)
output$`tutorial-exercise-cohort-model-output` <- renderUI({
  `tutorial-exercise-cohort-model-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("cohort-model", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "cohort-model", exercise = TRUE, 
        exercise.setup = "parameters", code = c("update_probabilities <- function(probs, transitions) {", 
        "  as.vector(probs %*% transitions)", "}", "", "run_cohort_model <- function(initial_probs, transitions, t) {", 
        "  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))", 
        "  probabilities[1, ] <- initial_probs", "", "  for (x in seq_len(t)) {", 
        "    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],", 
        "                                                   transitions)", 
        "  }", "", "  probabilities", "}", "", "calculate_outcome_value <- function(probs, values) {", 
        "  sum(probs * values)", "}", "", "calculate_outcomes <- function(probabilities, values, discount_rate = 0) {", 
        "  t <- nrow(probabilities)", "  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))", 
        "}", ""), out.width.px = 624, out.height.px = 384, params.src = "cohort-model, exercise=TRUE, exercise.setup = \"parameters\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-individual-model-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-individual-model-code-editor`)), session)
output$`tutorial-exercise-individual-model-output` <- renderUI({
  `tutorial-exercise-individual-model-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("individual-model", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "individual-model", exercise = TRUE, 
        exercise.setup = "cohort-model", code = c("update_state <- function(initial_state, transitions) {", 
        "  n <- nrow(transitions)", "  sample.int(n, 1, prob = transitions[initial_state, ])", 
        "}", "", "simulate_individual <- function(initial_state, transitions, t) {", 
        "  states <- vector(\"integer\", length = t + 1)", "  states[1] <- initial_state", 
        "", "  for (x in seq_len(t)) {", "    states[x + 1] <- update_state(states[x], transitions)", 
        "  }", "", "  states", "}", "", "run_individual_model <- function(initial_states, transitions, t) {", 
        "  n <- length(initial_states)", "", "  states <- matrix(nrow = n, ncol = t + 1)", 
        "  for (x in seq_len(n)) {", "    states[x, ] <- simulate_individual(initial_states[x], transitions, t)", 
        "  }", "", "  states", "}", "", "calculate_individual_outcome_value <- function(states, values) {", 
        "  matrix(values[states], nrow = nrow(states))", "}", 
        "", "calculate_average_outcomes <- function(states, values, discount_rate = 0) {", 
        "  outcomes <- calculate_individual_outcome_value(states, values)", 
        "  n <- nrow(outcomes)", "  t <- ncol(outcomes)", "  for (x in seq_len(n)) {", 
        "    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)", 
        "  }", "  mean(rowSums(outcomes))", "}", ""), out.width.px = 624, 
        out.height.px = 384, params.src = "individual-model, exercise=TRUE, exercise.setup = \"cohort-model\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-transitions_uc-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-transitions_uc-code-editor`)), session)
output$`tutorial-exercise-transitions_uc-output` <- renderUI({
  `tutorial-exercise-transitions_uc-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("transitions_uc", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "transitions_uc", exercise = TRUE, 
        exercise.setup = "individual-model", code = c("transitions_UC <- transitions", 
        "transitions_UC"), out.width.px = 624, out.height.px = 384, 
        params.src = "transitions_uc, exercise=TRUE, exercise.setup = \"individual-model\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-costs_uc-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-costs_uc-code-editor`)), session)
output$`tutorial-exercise-costs_uc-output` <- renderUI({
  `tutorial-exercise-costs_uc-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("costs_uc", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "costs_uc", exercise = TRUE, 
        exercise.setup = "transitions_uc", code = c("costs_UC <- costs", 
        "costs_UC"), out.width.px = 624, out.height.px = 384, 
        params.src = "costs_uc, exercise=TRUE, exercise.setup = \"transitions_uc\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-utility_uc-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-utility_uc-code-editor`)), session)
output$`tutorial-exercise-utility_uc-output` <- renderUI({
  `tutorial-exercise-utility_uc-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("utility_uc", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "utility_uc", exercise = TRUE, 
        exercise.setup = "costs_uc", code = c("utility_UC <- utility", 
        "utility_UC"), out.width.px = 624, out.height.px = 384, 
        params.src = "utility_uc, exercise=TRUE, exercise.setup = \"costs_uc\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-improved-recovery-parameters-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-improved-recovery-parameters-code-editor`)), session)
output$`tutorial-exercise-improved-recovery-parameters-output` <- renderUI({
  `tutorial-exercise-improved-recovery-parameters-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("improved-recovery-parameters", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, options = list(eval = TRUE, 
        echo = TRUE, results = "markup", tidy = FALSE, tidy.opts = NULL, 
        collapse = FALSE, prompt = FALSE, comment = NA, highlight = FALSE, 
        strip.white = TRUE, size = "normalsize", background = "#F7F7F7", 
        cache = 0, cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "improved-recovery-parameters", 
        exercise = TRUE, exercise.setup = "utility_uc", code = c("transitions_IR <- transitions", 
        "transitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)", 
        "", "costs_IR <- costs", "costs_IR[2] <- 9000"), out.width.px = 624, 
        out.height.px = 384, params.src = "improved-recovery-parameters, exercise=TRUE, exercise.setup = \"utility_uc\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-ongoing-treatment-parameters-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-ongoing-treatment-parameters-code-editor`)), session)
output$`tutorial-exercise-ongoing-treatment-parameters-output` <- renderUI({
  `tutorial-exercise-ongoing-treatment-parameters-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("ongoing-treatment-parameters", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, options = list(eval = TRUE, 
        echo = TRUE, results = "markup", tidy = FALSE, tidy.opts = NULL, 
        collapse = FALSE, prompt = FALSE, comment = NA, highlight = FALSE, 
        strip.white = TRUE, size = "normalsize", background = "#F7F7F7", 
        cache = 0, cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "ongoing-treatment-parameters", 
        exercise = TRUE, exercise.setup = "improved-recovery-parameters", 
        code = c("utility_OT <- utility", "utility_OT[3:4] <- c(0.85, 0.95)", 
        "", "costs_OT <- costs", "costs_OT[3:4] <- c(1700, 1000)"
        ), out.width.px = 624, out.height.px = 384, params.src = "ongoing-treatment-parameters, exercise=TRUE, exercise.setup = \"improved-recovery-parameters\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-reduced-oa-incidence-parameters-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-reduced-oa-incidence-parameters-code-editor`)), session)
output$`tutorial-exercise-reduced-oa-incidence-parameters-output` <- renderUI({
  `tutorial-exercise-reduced-oa-incidence-parameters-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("reduced-oa-incidence-parameters", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, options = list(eval = TRUE, 
        echo = TRUE, results = "markup", tidy = FALSE, tidy.opts = NULL, 
        collapse = FALSE, prompt = FALSE, comment = NA, highlight = FALSE, 
        strip.white = TRUE, size = "normalsize", background = "#F7F7F7", 
        cache = 0, cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "reduced-oa-incidence-parameters", 
        exercise = TRUE, exercise.setup = "ongoing-treatment-parameters", 
        code = c("transitions_RO <- transitions", "transitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)", 
        "transitions_RO[4, 4:5] <- c(0.94, 0.04)", "", "costs_RO <- costs", 
        "costs_RO[3:4] <- c(1500, 1000)"), out.width.px = 624, 
        out.height.px = 384, params.src = "reduced-oa-incidence-parameters, exercise=TRUE, exercise.setup = \"ongoing-treatment-parameters\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-cohort-simulation-function-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-cohort-simulation-function-code-editor`)), session)
output$`tutorial-exercise-cohort-simulation-function-output` <- renderUI({
  `tutorial-exercise-cohort-simulation-function-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("cohort-simulation-function", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-function", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,\n  # and `utility` parameters for that scenario\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = ____, t = ____)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = ____, t = ____)\n  \n  costs_UC <- calculate_outcomes(____, ____, discount_rate = discount_rate)\n  costs_TX <- calculate_outcomes(____, ____, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(____, ____, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(____, ____, discount_rate = discount_rate)\n  \n  list(UC = list(costs = costs_UC, QALYs = QALYs_UC),\n       TX = list(costs = costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-function\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r")), code_check = structure("grade_code()", chunk_opts = list(
        label = "cohort-simulation-function-code-check")), error_check = NULL, 
    check = NULL, solution = structure(c("cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {", 
    "  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,", 
    "  # and `utility` parameters for that scenario", "  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)", 
    "  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)", 
    "  ", "  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)", 
    "  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)", 
    "  ", "  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)", 
    "  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)", 
    "  ", "  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),", 
    "       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))", 
    "}"), chunk_opts = list(label = "cohort-simulation-function-solution")), 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "cohort-simulation-function", 
        exercise = TRUE, exercise.setup = "reduced-oa-incidence-parameters", 
        code = c("cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {", 
        "  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,", 
        "  # and `utility` parameters for that scenario", "  probabilities_UC <- run_cohort_model(initial_probs, transitions = ____, t = ____)", 
        "  probabilities_TX <- run_cohort_model(initial_probs, transitions = ____, t = ____)", 
        "  ", "  costs_UC <- calculate_outcomes(____, ____, discount_rate = discount_rate)", 
        "  costs_TX <- calculate_outcomes(____, ____, discount_rate = discount_rate)", 
        "  ", "  QALYs_UC <- calculate_outcomes(____, ____, discount_rate = discount_rate)", 
        "  QALYs_TX <- calculate_outcomes(____, ____, discount_rate = discount_rate)", 
        "  ", "  list(UC = list(costs = costs_UC, QALYs = QALYs_UC),", 
        "       TX = list(costs = costs_TX, QALYs = QALYs_TX))", 
        "}"), out.width.px = 624, out.height.px = 384, params.src = "cohort-simulation-function, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"reduced-oa-incidence-parameters\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-run-cohort-simulation-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-run-cohort-simulation-code-editor`)), session)
output$`tutorial-exercise-run-cohort-simulation-output` <- renderUI({
  `tutorial-exercise-run-cohort-simulation-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("run-cohort-simulation", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, options = list(eval = FALSE, 
        echo = TRUE, results = "markup", tidy = FALSE, tidy.opts = NULL, 
        collapse = FALSE, prompt = FALSE, comment = NA, highlight = FALSE, 
        strip.white = TRUE, size = "normalsize", background = "#F7F7F7", 
        cache = 0, cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "run-cohort-simulation", 
        exercise = TRUE, exercise.setup = "cohort-simulation-definition", 
        code = c("simulation_IR <- cohort_simulation(", "  initial_probs = probs,", 
        "  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),", 
        "  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),", 
        "  horizon = 10, discount_rate = 0.035", ")", "simulation_IR"
        ), out.width.px = 624, out.height.px = 384, params.src = "run-cohort-simulation, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"cohort-simulation-definition\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-icer-function-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-icer-function-code-editor`)), session)
output$`tutorial-exercise-icer-function-output` <- renderUI({
  `tutorial-exercise-icer-function-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("icer-function", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-function", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$____ - simulation_output$____\n  incremental_qalys <- simulation_output$____ - simulation_output$____\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = ____ / ____)\n}", 
            opts = list(label = "\"icer-function\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r")), code_check = structure("grade_code()", chunk_opts = list(
        label = "icer-function-code-check")), error_check = NULL, 
    check = NULL, solution = structure(c("calculate_ICER <- function(simulation_output) {", 
    "  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs", 
    "  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs", 
    "  ", "  list(Costs = incremental_costs,", "       QALYs = incremental_qalys,", 
    "       ICER = incremental_costs / incremental_qalys)", "}"
    ), chunk_opts = list(label = "icer-function-solution")), 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "icer-function", exercise = TRUE, 
        exercise.setup = "run-cohort-simulation", code = c("calculate_ICER <- function(simulation_output) {", 
        "  incremental_costs <- simulation_output$____ - simulation_output$____", 
        "  incremental_qalys <- simulation_output$____ - simulation_output$____", 
        "  ", "  list(Costs = incremental_costs,", "       QALYs = incremental_qalys,", 
        "       ICER = ____ / ____)", "}"), out.width.px = 624, 
        out.height.px = 384, params.src = "icer-function, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"run-cohort-simulation\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-icer-ir-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-icer-ir-code-editor`)), session)
output$`tutorial-exercise-icer-ir-output` <- renderUI({
  `tutorial-exercise-icer-ir-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("icer-ir", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR\ncalculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-definition", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
            opts = list(label = "\"icer-definition\"", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r"), list(label = "icer-ir", code = "ICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
            opts = list(label = "\"icer-ir\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-definition\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, options = list(eval = FALSE, 
        echo = TRUE, results = "markup", tidy = FALSE, tidy.opts = NULL, 
        collapse = FALSE, prompt = FALSE, comment = NA, highlight = FALSE, 
        strip.white = TRUE, size = "normalsize", background = "#F7F7F7", 
        cache = 0, cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "icer-ir", exercise = TRUE, 
        exercise.setup = "icer-definition", code = c("ICER_IR <- calculate_ICER(simulation_IR)", 
        "ICER_IR"), out.width.px = 624, out.height.px = 384, 
        params.src = "icer-ir, exercise=TRUE, exercise.eval=FALSE, exercise.setup = \"icer-definition\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-cea-ot-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-cea-ot-code-editor`)), session)
output$`tutorial-exercise-cea-ot-output` <- renderUI({
  `tutorial-exercise-cea-ot-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("cea-ot", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR\ncalculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}\nICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-definition", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
            opts = list(label = "\"icer-definition\"", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r"), list(label = "icer-ir", code = "ICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
            opts = list(label = "\"icer-ir\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-definition\""), 
            engine = "r"), list(label = "cea-ot", code = "simulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = ____, costs = ____, utility = ____),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- ____(____)\nICER_OT\n", 
            opts = list(label = "\"cea-ot\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-ir\""), 
            engine = "r")), code_check = structure("grade_code()", chunk_opts = list(
        label = "cea-ot-code-check")), error_check = NULL, check = NULL, 
    solution = structure(c("simulation_OT <- cohort_simulation(", 
    "  initial_probs = probs,", "  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),", 
    "  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),", 
    "  horizon = 10, discount_rate = 0.035", ")", "ICER_OT <- calculate_ICER(simulation_OT)", 
    "ICER_OT"), chunk_opts = list(label = "cea-ot-solution")), 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "cea-ot", exercise = TRUE, 
        exercise.setup = "icer-ir", code = c("simulation_OT <- cohort_simulation(", 
        "  initial_probs = probs,", "  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),", 
        "  parameters_TX = list(transitions = ____, costs = ____, utility = ____),", 
        "  horizon = 10, discount_rate = 0.035", ")", "ICER_OT <- ____(____)", 
        "ICER_OT", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "cea-ot, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"icer-ir\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-cea-ro-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-cea-ro-code-editor`)), session)
output$`tutorial-exercise-cea-ro-output` <- renderUI({
  `tutorial-exercise-cea-ro-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("cea-ro", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR\ncalculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}\nICER_IR <- calculate_ICER(simulation_IR)\nICER_IR\nsimulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-definition", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
            opts = list(label = "\"icer-definition\"", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r"), list(label = "icer-ir", code = "ICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
            opts = list(label = "\"icer-ir\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-definition\""), 
            engine = "r"), list(label = "ot-cea-definition", 
            code = "simulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)", 
            opts = list(label = "\"ot-cea-definition\"", exercise.setup = "\"icer-ir\""), 
            engine = "r"), list(label = "cea-ro", code = "simulation_RO <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = ____, costs = ____, utility = ____),\n  horizon = 10, discount_rate = 0.035\n)\nICER_RO <- ____(____)\nICER_RO\n", 
            opts = list(label = "\"cea-ro\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"ot-cea-definition\""), 
            engine = "r")), code_check = structure("grade_code()", chunk_opts = list(
        label = "cea-ro-code-check")), error_check = NULL, check = NULL, 
    solution = structure(c("simulation_RO <- cohort_simulation(", 
    "  initial_probs = probs,", "  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),", 
    "  parameters_TX = list(transitions = transitions_RO, costs = costs_RO, utility = utility_UC),", 
    "  horizon = 10, discount_rate = 0.035", ")", "ICER_RO <- calculate_ICER(simulation_RO)", 
    "ICER_RO"), chunk_opts = list(label = "cea-ro-solution")), 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "cea-ro", exercise = TRUE, 
        exercise.setup = "ot-cea-definition", code = c("simulation_RO <- cohort_simulation(", 
        "  initial_probs = probs,", "  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),", 
        "  parameters_TX = list(transitions = ____, costs = ____, utility = ____),", 
        "  horizon = 10, discount_rate = 0.035", ")", "ICER_RO <- ____(____)", 
        "ICER_RO", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "cea-ro, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"ot-cea-definition\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-initial-cohort-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-initial-cohort-code-editor`)), session)
output$`tutorial-exercise-initial-cohort-output` <- renderUI({
  `tutorial-exercise-initial-cohort-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("initial-cohort", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR\ncalculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}\nICER_IR <- calculate_ICER(simulation_IR)\nICER_IR\nsimulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-definition", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
            opts = list(label = "\"icer-definition\"", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r"), list(label = "icer-ir", code = "ICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
            opts = list(label = "\"icer-ir\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-definition\""), 
            engine = "r"), list(label = "ot-cea-definition", 
            code = "simulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)", 
            opts = list(label = "\"ot-cea-definition\"", exercise.setup = "\"icer-ir\""), 
            engine = "r"), list(label = "initial-cohort", code = "cohort <- sample.int(8, 10000, replace = TRUE, prob = probs)", 
            opts = list(label = "\"initial-cohort\"", exercise = "TRUE", 
                exercise.setup = "\"ot-cea-definition\""), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = TRUE, label = "initial-cohort", exercise = TRUE, 
        exercise.setup = "ot-cea-definition", code = "cohort <- sample.int(8, 10000, replace = TRUE, prob = probs)", 
        out.width.px = 624, out.height.px = 384, params.src = "initial-cohort, exercise = TRUE, exercise.setup=\"ot-cea-definition\"", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged"), 
    engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-individual-simulation-function-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-individual-simulation-function-code-editor`)), session)
output$`tutorial-exercise-individual-simulation-function-output` <- renderUI({
  `tutorial-exercise-individual-simulation-function-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("individual-simulation-function", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR\ncalculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}\nICER_IR <- calculate_ICER(simulation_IR)\nICER_IR\nsimulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)\ncohort <- sample.int(8, 10000, replace = TRUE, prob = probs)", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-definition", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
            opts = list(label = "\"icer-definition\"", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r"), list(label = "icer-ir", code = "ICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
            opts = list(label = "\"icer-ir\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-definition\""), 
            engine = "r"), list(label = "ot-cea-definition", 
            code = "simulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)", 
            opts = list(label = "\"ot-cea-definition\"", exercise.setup = "\"icer-ir\""), 
            engine = "r"), list(label = "initial-cohort", code = "cohort <- sample.int(8, 10000, replace = TRUE, prob = probs)", 
            opts = list(label = "\"initial-cohort\"", exercise = "TRUE", 
                exercise.setup = "\"ot-cea-definition\""), engine = "r"), 
        list(label = "individual-simulation-function", code = "individual_simulation <- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {\n  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,\n  # and `utility` parameters for that scenario\n  states_UC <- run_individual_model(initial_states, transitions = ____, t = ____)\n  states_TX <- run_individual_model(initial_states, transitions = ____, t = ____)\n  \n  costs_UC <- calculate_average_outcomes(states = ____, values = ____,\n                                         discount_rate = discount_rate)\n  costs_TX <- calculate_average_outcomes(states = ____, values = ____,\n                                         discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_average_outcomes(states = ____, values = ____,\n                                         discount_rate = discount_rate)\n  QALYs_TX <- calculate_average_outcomes(states = ____, values = ____,\n                                         discount_rate = discount_rate)\n  \n  list(UC = list(costs = costs_UC, QALYs = QALYs_UC),\n       TX = list(costs = costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"individual-simulation-function\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"initial-cohort\""), 
            engine = "r")), code_check = structure("grade_code()", chunk_opts = list(
        label = "individual-simulation-function-code-check")), 
    error_check = NULL, check = NULL, solution = structure(c("individual_simulation <- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {", 
    "  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,", 
    "  # and `utility` parameters for that scenario", "  states_UC <- run_individual_model(initial_states, transitions = parameters_UC$transitions, t = horizon)", 
    "  states_TX <- run_individual_model(initial_states, transitions = parameters_TX$transitions, t = horizon)", 
    "  ", "  Costs_UC <- calculate_average_outcomes(states_UC, parameters_UC$costs, discount_rate = discount_rate)", 
    "  Costs_TX <- calculate_average_outcomes(states_TX, parameters_TX$costs, discount_rate = discount_rate)", 
    "  ", "  QALYs_UC <- calculate_average_outcomes(states_UC, parameters_UC$utility, discount_rate = discount_rate)", 
    "  QALYs_TX <- calculate_average_outcomes(states_TX, parameters_TX$utility, discount_rate = discount_rate)", 
    "  ", "  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),", 
    "       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))", 
    "}"), chunk_opts = list(label = "individual-simulation-function-solution")), 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, strip.white = TRUE, 
        size = "normalsize", background = "#F7F7F7", cache = 0, 
        cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "individual-simulation-function", 
        exercise = TRUE, exercise.setup = "initial-cohort", code = c("individual_simulation <- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {", 
        "  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,", 
        "  # and `utility` parameters for that scenario", "  states_UC <- run_individual_model(initial_states, transitions = ____, t = ____)", 
        "  states_TX <- run_individual_model(initial_states, transitions = ____, t = ____)", 
        "  ", "  costs_UC <- calculate_average_outcomes(states = ____, values = ____,", 
        "                                         discount_rate = discount_rate)", 
        "  costs_TX <- calculate_average_outcomes(states = ____, values = ____,", 
        "                                         discount_rate = discount_rate)", 
        "  ", "  QALYs_UC <- calculate_average_outcomes(states = ____, values = ____,", 
        "                                         discount_rate = discount_rate)", 
        "  QALYs_TX <- calculate_average_outcomes(states = ____, values = ____,", 
        "                                         discount_rate = discount_rate)", 
        "  ", "  list(UC = list(costs = costs_UC, QALYs = QALYs_UC),", 
        "       TX = list(costs = costs_TX, QALYs = QALYs_TX))", 
        "}"), out.width.px = 624, out.height.px = 384, params.src = "individual-simulation-function, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"initial-cohort\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-run-individual-simulation-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-run-individual-simulation-code-editor`)), session)
output$`tutorial-exercise-run-individual-simulation-output` <- renderUI({
  `tutorial-exercise-run-individual-simulation-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache("run-individual-simulation", list(setup = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)\nupdate_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n\nupdate_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n\ntransitions_UC <- transitions\ntransitions_UC\ncosts_UC <- costs\ncosts_UC\nutility_UC <- utility\nutility_UC\ntransitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000\nutility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)\ntransitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)\ncohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}\nsimulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR\ncalculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}\nICER_IR <- calculate_ICER(simulation_IR)\nICER_IR\nsimulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)\ncohort <- sample.int(8, 10000, replace = TRUE, prob = probs)\nindividual_simulation <- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {\n  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,\n  # and `utility` parameters for that scenario\n  states_UC <- run_individual_model(initial_states, transitions = parameters_UC$transitions, t = horizon)\n  states_TX <- run_individual_model(initial_states, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_average_outcomes(states_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_average_outcomes(states_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_average_outcomes(states_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_average_outcomes(states_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
    chunks = list(list(label = "parameters", code = "states <- c(\"healthy\", \"acl_acute\", \"acl_chronic\", \"acl_recovered\", \"oa\", \"tkr\", \"post_tkr\", \"dead\")\n\nprobs <- c(0, 1, 0, 0, 0, 0, 0, 0)\n\ntransitions <- rbind(c(1, 0, 0,    0,   0,    0,   0,    0),\n                     c(0, 0, 0.44, 0.5, 0.05, 0,   0,    0.01),\n                     c(0, 0, 0.38, 0.5, 0.1,  0,   0,    0.02),\n                     c(0, 0, 0,    0.9, 0.08, 0,   0,    0.02),\n                     c(0, 0, 0,    0,   0.87, 0.1, 0,    0.03),\n                     c(0, 0, 0,    0,   0,    0,   0.96, 0.04),\n                     c(0, 0, 0,    0,   0,    0,   0.95, 0.05),\n                     c(0, 0, 0,    0,   0,    0,   0,    1))\n\ncosts <- c(0, 7000, 1200, 500, 1000, 20000, 1000, 0)\nutility <- c(1, 0.5, 0.8, 0.9, 0.7, 0.6, 0.8, 0)", 
        opts = list(label = "\"parameters\"", exercise = "TRUE"), 
        engine = "r"), list(label = "cohort-model", code = "update_probabilities <- function(probs, transitions) {\n  as.vector(probs %*% transitions)\n}\n\nrun_cohort_model <- function(initial_probs, transitions, t) {\n  probabilities <- matrix(nrow = t + 1, ncol = length(initial_probs))\n  probabilities[1, ] <- initial_probs\n\n  for (x in seq_len(t)) {\n    probabilities[x + 1, ] <- update_probabilities(probabilities[x, ],\n                                                   transitions)\n  }\n\n  probabilities\n}\n\ncalculate_outcome_value <- function(probs, values) {\n  sum(probs * values)\n}\n\ncalculate_outcomes <- function(probabilities, values, discount_rate = 0) {\n  t <- nrow(probabilities)\n  sum((probabilities %*% values) * (1 - discount_rate) ^ ((1:t) - 1))\n}\n", 
        opts = list(label = "\"cohort-model\"", exercise = "TRUE", 
            exercise.setup = "\"parameters\""), engine = "r"), 
        list(label = "individual-model", code = "update_state <- function(initial_state, transitions) {\n  n <- nrow(transitions)\n  sample.int(n, 1, prob = transitions[initial_state, ])\n}\n\nsimulate_individual <- function(initial_state, transitions, t) {\n  states <- vector(\"integer\", length = t + 1)\n  states[1] <- initial_state\n\n  for (x in seq_len(t)) {\n    states[x + 1] <- update_state(states[x], transitions)\n  }\n\n  states\n}\n\nrun_individual_model <- function(initial_states, transitions, t) {\n  n <- length(initial_states)\n\n  states <- matrix(nrow = n, ncol = t + 1)\n  for (x in seq_len(n)) {\n    states[x, ] <- simulate_individual(initial_states[x], transitions, t)\n  }\n\n  states\n}\n\ncalculate_individual_outcome_value <- function(states, values) {\n  matrix(values[states], nrow = nrow(states))\n}\n\ncalculate_average_outcomes <- function(states, values, discount_rate = 0) {\n  outcomes <- calculate_individual_outcome_value(states, values)\n  n <- nrow(outcomes)\n  t <- ncol(outcomes)\n  for (x in seq_len(n)) {\n    outcomes[x, ] <- outcomes[x, ] * (1 - discount_rate) ^ ((1:t) - 1)\n  }\n  mean(rowSums(outcomes))\n}\n", 
            opts = list(label = "\"individual-model\"", exercise = "TRUE", 
                exercise.setup = "\"cohort-model\""), engine = "r"), 
        list(label = "transitions_uc", code = "transitions_UC <- transitions\ntransitions_UC", 
            opts = list(label = "\"transitions_uc\"", exercise = "TRUE", 
                exercise.setup = "\"individual-model\""), engine = "r"), 
        list(label = "costs_uc", code = "costs_UC <- costs\ncosts_UC", 
            opts = list(label = "\"costs_uc\"", exercise = "TRUE", 
                exercise.setup = "\"transitions_uc\""), engine = "r"), 
        list(label = "utility_uc", code = "utility_UC <- utility\nutility_UC", 
            opts = list(label = "\"utility_uc\"", exercise = "TRUE", 
                exercise.setup = "\"costs_uc\""), engine = "r"), 
        list(label = "improved-recovery-parameters", code = "transitions_IR <- transitions\ntransitions_IR[2, ] <- c(0, 0, 0.24, 0.7, 0.05, 0, 0, 0.01)\n\ncosts_IR <- costs\ncosts_IR[2] <- 9000", 
            opts = list(label = "\"improved-recovery-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"utility_uc\""), 
            engine = "r"), list(label = "ongoing-treatment-parameters", 
            code = "utility_OT <- utility\nutility_OT[3:4] <- c(0.85, 0.95)\n\ncosts_OT <- costs\ncosts_OT[3:4] <- c(1700, 1000)", 
            opts = list(label = "\"ongoing-treatment-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"improved-recovery-parameters\""), 
            engine = "r"), list(label = "reduced-oa-incidence-parameters", 
            code = "transitions_RO <- transitions\ntransitions_RO[3, 3:5] <- c(0.43, 0.5, 0.05)\ntransitions_RO[4, 4:5] <- c(0.94, 0.04)\n\ncosts_RO <- costs\ncosts_RO[3:4] <- c(1500, 1000)", 
            opts = list(label = "\"reduced-oa-incidence-parameters\"", 
                exercise = "TRUE", exercise.setup = "\"ongoing-treatment-parameters\""), 
            engine = "r"), list(label = "cohort-simulation-definition", 
            code = "cohort_simulation <- function(initial_probs, parameters_UC, parameters_TX, horizon, discount_rate) {\n  probabilities_UC <- run_cohort_model(initial_probs, transitions = parameters_UC$transitions, t = horizon)\n  probabilities_TX <- run_cohort_model(initial_probs, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_outcomes(probabilities_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_outcomes(probabilities_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"cohort-simulation-definition\"", 
                exercise.setup = "\"reduced-oa-incidence-parameters\""), 
            engine = "r"), list(label = "run-cohort-simulation", 
            code = "simulation_IR <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nsimulation_IR", 
            opts = list(label = "\"run-cohort-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"cohort-simulation-definition\""), 
            engine = "r"), list(label = "icer-definition", code = "calculate_ICER <- function(simulation_output) {\n  incremental_costs <- simulation_output$TX$Costs - simulation_output$UC$Costs\n  incremental_qalys <- simulation_output$TX$QALYs - simulation_output$UC$QALYs\n  \n  list(Costs = incremental_costs,\n       QALYs = incremental_qalys,\n       ICER = incremental_costs / incremental_qalys)\n}", 
            opts = list(label = "\"icer-definition\"", exercise.setup = "\"run-cohort-simulation\""), 
            engine = "r"), list(label = "icer-ir", code = "ICER_IR <- calculate_ICER(simulation_IR)\nICER_IR", 
            opts = list(label = "\"icer-ir\"", exercise = "TRUE", 
                exercise.eval = "FALSE", exercise.setup = "\"icer-definition\""), 
            engine = "r"), list(label = "ot-cea-definition", 
            code = "simulation_OT <- cohort_simulation(\n  initial_probs = probs,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_UC, costs = costs_OT, utility = utility_OT),\n  horizon = 10, discount_rate = 0.035\n)\nICER_OT <- calculate_ICER(simulation_OT)", 
            opts = list(label = "\"ot-cea-definition\"", exercise.setup = "\"icer-ir\""), 
            engine = "r"), list(label = "initial-cohort", code = "cohort <- sample.int(8, 10000, replace = TRUE, prob = probs)", 
            opts = list(label = "\"initial-cohort\"", exercise = "TRUE", 
                exercise.setup = "\"ot-cea-definition\""), engine = "r"), 
        list(label = "individual-simulation-definition", code = "individual_simulation <- function(initial_states, parameters_UC, parameters_TX, horizon, discount_rate) {\n  # Each of `parameters_UC` and `parameters_TX` should be a containing the `transitions`, `costs`,\n  # and `utility` parameters for that scenario\n  states_UC <- run_individual_model(initial_states, transitions = parameters_UC$transitions, t = horizon)\n  states_TX <- run_individual_model(initial_states, transitions = parameters_TX$transitions, t = horizon)\n  \n  Costs_UC <- calculate_average_outcomes(states_UC, parameters_UC$costs, discount_rate = discount_rate)\n  Costs_TX <- calculate_average_outcomes(states_TX, parameters_TX$costs, discount_rate = discount_rate)\n  \n  QALYs_UC <- calculate_average_outcomes(states_UC, parameters_UC$utility, discount_rate = discount_rate)\n  QALYs_TX <- calculate_average_outcomes(states_TX, parameters_TX$utility, discount_rate = discount_rate)\n  \n  list(UC = list(Costs = Costs_UC, QALYs = QALYs_UC),\n       TX = list(Costs = Costs_TX, QALYs = QALYs_TX))\n}", 
            opts = list(label = "\"individual-simulation-definition\"", 
                exercise.setup = "\"initial-cohort\""), engine = "r"), 
        list(label = "run-individual-simulation", code = "individual_simulation_IR <- individual_simulation(\n  initial_states = cohort,\n  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),\n  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),\n  horizon = 10, discount_rate = 0.035\n)\nindividual_simulation_IR\n\nindividual_ICER_IR <- calculate_ICER(individual_simulation_IR)\nindividual_ICER_IR\n", 
            opts = list(label = "\"run-individual-simulation\"", 
                exercise = "TRUE", exercise.eval = "FALSE", exercise.setup = "\"individual-simulation-definition\""), 
            engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, options = list(eval = FALSE, 
        echo = TRUE, results = "markup", tidy = FALSE, tidy.opts = NULL, 
        collapse = FALSE, prompt = FALSE, comment = NA, highlight = FALSE, 
        strip.white = TRUE, size = "normalsize", background = "#F7F7F7", 
        cache = 0, cache.path = "Cost-Effectiveness-Analysis_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Cost-Effectiveness-Analysis_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, tutorial = TRUE, exercise.timelimit = 60, 
        exercise.checker = "function (label = NULL, solution_code = NULL, user_code = NULL, \n    check_code = NULL, envir_result = NULL, evaluate_result = NULL, \n    envir_prep = NULL, last_value = NULL, ...) \n{\n    (utils::getFromNamespace(\"check_exercise\", \"gradethis\"))(label = label, \n        solution_code = solution_code, user_code = user_code, \n        check_code = check_code, envir_result = envir_result, \n        evaluate_result = evaluate_result, envir_prep = envir_prep, \n        last_value = last_value, ...)\n}", 
        exercise.error.check.code = "gradethis_error_checker()", 
        exercise.eval = FALSE, label = "run-individual-simulation", 
        exercise = TRUE, exercise.setup = "individual-simulation-definition", 
        code = c("individual_simulation_IR <- individual_simulation(", 
        "  initial_states = cohort,", "  parameters_UC = list(transitions = transitions_UC, costs = costs_UC, utility = utility_UC),", 
        "  parameters_TX = list(transitions = transitions_IR, costs = costs_IR, utility = utility_UC),", 
        "  horizon = 10, discount_rate = 0.035", ")", "individual_simulation_IR", 
        "", "individual_ICER_IR <- calculate_ICER(individual_simulation_IR)", 
        "individual_ICER_IR", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "run-individual-simulation, exercise=TRUE, exercise.eval=FALSE, exercise.setup=\"individual-simulation-definition\"", 
        fig.num = 0, exercise.df_print = "paged"), engine = "r"))
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["i18n"]},{"type":"character","attributes":{},"value":["1.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/i18n"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["i18next.min.js","tutorial-i18n-init.js"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["<script id=\"i18n-cstm-trns\" type=\"application/json\">{\"language\":\"en\",\"resources\":{\"en\":{\"translation\":{\"button\":{\"runcode\":\"Run Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Hint\",\"hint_plural\":\"Hints\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Next Hint\",\"hintprev\":\"Previous Hint\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copy to Clipboard\",\"startover\":\"Start Over\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continue\",\"submitanswer\":\"Submit Answer\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Previous Topic\",\"nexttopic\":\"Next Topic\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Try Again\"},\"text\":{\"startover\":\"Start Over\",\"areyousure\":\"Are you sure you want to start over? (all exercise progress will be reset)\",\"youmustcomplete\":\"You must complete the\",\"exercise\":\"exercise\",\"exercise_plural\":\"exercises\",\"inthissection\":\"in this section before continuing.\",\"code\":\"Code\",\"enginecap\":\"{{engine}} $t(text.code)\",\"quiz\":\"Quiz\"}}},\"fr\":{\"translation\":{\"button\":{\"runcode\":\"Lancer le Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Indication\",\"hint_plural\":\"Indications\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Indication Suivante\",\"hintprev\":\"Indication Précédente\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copier dans le Presse-papier\",\"startover\":\"Recommencer\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuer\",\"submitanswer\":\"Soumettre\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Chapitre Précédent\",\"nexttopic\":\"Chapitre Suivant\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Réessayer\"},\"text\":{\"startover\":\"Recommencer\",\"areyousure\":\"Êtes-vous certains de vouloir recommencer? (La progression sera remise à zéro)\",\"youmustcomplete\":\"Vous devez d'abord compléter\",\"exercise\":\"l'exercice\",\"exercise_plural\":\"des exercices\",\"inthissection\":\"de cette section avec de continuer.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\"}}},\"es\":{\"translation\":{\"button\":{\"runcode\":\"Ejecutar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Pista\",\"hint_plural\":\"Pistas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Siguiente pista\",\"hintprev\":\"Pista anterior\",\"solution\":\"Solución\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar al portapapeles\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar respuesta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tema anterior\",\"nexttopic\":\"Tema siguiente\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Volver a intentar\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"¿De verdad quieres empezar de nuevo? (todo el progreso del ejercicio se perderá)\",\"youmustcomplete\":\"Debes completar\",\"exercise\":\"el ejercicio\",\"exercise_plural\":\"los ejercicios\",\"inthissection\":\"en esta sección antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Cuestionario\"}}},\"pt\":{\"translation\":{\"button\":{\"runcode\":\"Executar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Dica\",\"hint_plural\":\"Dicas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Próxima dica\",\"hintprev\":\"Dica anterior\",\"solution\":\"Solução\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar para a área de transferência\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar resposta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tópico anterior\",\"nexttopic\":\"Próximo tópico\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tentar novamente\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"Tem certeza que deseja começar novamente? (todo o progresso feito será perdido)\",\"youmustcomplete\":\"Você deve completar\",\"exercise\":\"o exercício\",\"exercise_plural\":\"os exercícios\",\"inthissection\":\"nesta seção antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\"}}},\"tr\":{\"translation\":{\"button\":{\"runcode\":\"Çalıştırma Kodu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Ipucu\",\"hint_plural\":\"İpuçları\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Sonraki İpucu\",\"hintprev\":\"Önceki İpucu\",\"solution\":\"Çözüm\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Pano'ya Kopyala\",\"startover\":\"Baştan Başlamak\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Devam et\",\"submitanswer\":\"Cevabı onayla\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Önceki Konu\",\"nexttopic\":\"Sonraki Konu\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tekrar Deneyin\"},\"text\":{\"startover\":\"Baştan Başlamak\",\"areyousure\":\"Baştan başlamak istediğinizden emin misiniz? (tüm egzersiz ilerlemesi kaybolacak)\",\"youmustcomplete\":\"Tamamlamalısın\",\"exercise\":\"egzersiz\",\"exercise_plural\":\"egzersizler\",\"inthissection\":\"devam etmeden önce bu bölümde\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Sınav\"}}},\"emo\":{\"translation\":{\"button\":{\"runcode\":\"🏃\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"💡\",\"hint_plural\":\"$t(button.hint)\",\"hinttitle\":\"$t(button.hint)\",\"solution\":\"🎯\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"📋\",\"startover\":\"⏮\",\"startovertitle\":\"Start Over\",\"continue\":\"✅\",\"submitanswer\":\"🆗\",\"submitanswertitle\":\"Submit Answer\",\"previoustopic\":\"⬅\",\"nexttopic\":\"➡\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"🔁\"},\"text\":{\"startover\":\"⏮\",\"areyousure\":\"🤔\",\"youmustcomplete\":\"⚠️ 👉 🧑‍💻\",\"exercise\":\"\",\"exercise_plural\":\"\",\"inthissection\":\"\",\"code\":\"💻\",\"enginecap\":\"$t(text.code) {{engine}}\"}}},\"eu\":{\"translation\":{\"button\":{\"runcode\":\"Kodea egikaritu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Laguntza\",\"hint_plural\":\"Laguntza\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Aurreko laguntza\",\"hintprev\":\"Hurrengo laguntza\",\"solution\":\"Ebazpena\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Arbelean kopiatu\",\"startover\":\"Berrabiarazi\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Jarraitu\",\"submitanswer\":\"Erantzuna bidali\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Aurreko atala\",\"nexttopic\":\"Hurrengo atala\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Berriro saiatu\"},\"text\":{\"startover\":\"Berrabiarazi\",\"areyousure\":\"Berriro hasi nahi duzu? (egindako lana galdu egingo da)\",\"youmustcomplete\":\"Aurrera egin baino lehen atal honetako\",\"exercise\":\"ariketa egin behar duzu.\",\"exercise_plural\":\"ariketak egin behar dituzu.\",\"inthissection\":\"\",\"code\":\"Kodea\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Galdetegia\"}}}}}<\/script>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.10"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1.9011"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1.9011"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]}},"value":[{"type":"character","attributes":{},"value":["backports","base","bslib","checkmate","compiler","curl","datasets","digest","ellipsis","evaluate","fastmap","gradethis","graphics","grDevices","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","learnr","lifecycle","magrittr","markdown","methods","mime","promises","R6","Rcpp","rlang","rmarkdown","rprojroot","sass","shiny","stats","stringi","stringr","tools","utils","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["1.2.1","4.0.4","0.2.5.1","2.0.0","4.0.4","4.3.2","4.0.4","0.6.27","0.3.2","0.14","1.1.0","0.2.3.9001","4.0.4","4.0.4","0.5.1.9006","1.5.3","1.6.1","0.1.4","1.7.2","1.33","1.2.0","0.10.1.9011","1.0.0","2.0.1","1.1","4.0.4","0.11","1.2.0.1","2.5.0","1.0.7","0.4.11","2.10","2.0.2","0.4.0","1.6.0","4.0.4","1.7.3","1.4.0","4.0.4","4.0.4","2.4.2","0.25","1.8-4","2.2.1"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">Tutorial</h2>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->



<!-- Build Tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
